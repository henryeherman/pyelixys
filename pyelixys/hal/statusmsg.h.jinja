#ifndef STATUSMSG_H_
#define STATUSMSG_H_

// Template Author: Henry Herman
// Author email: hherman@mednet.ucla.edu


// This is an autogenerated file.
// It was created by pyelixys.hal.statusfmt
// To ensure proper communication do not modify this file
// UNLESS you really know what you are doing!

{# Generate the define statements #}

{% for name,count,fmt in systems %}
#define {{name.upper()}}COUNT   {{count}}
{% endfor %}

{# First we loop through each system for repeat #}

{% for name,count,fmt in systems %}
{% if "Repeat" in fmt %}
   typedef struct __attribute__ ((__packed__)){
       {% for varname, type_ in fmt['Repeat'].items() %}
       {{fmt_chr[type_]}} {{varname}};
       {% endfor %}
   } {{name.upper().rstrip('S')}};
{% endif %}

{% endfor %}

{% for name,count,fmt in systems %}
   typedef struct __attribute__ ((__packed__)){
       {% for varname, type_ in fmt.items() %}
       {% if not varname == "Repeat" %}
        {{fmt_chr[type_]}} {{varname}};
        {% endif %}
       {% endfor %}
       {% if "Repeat" in fmt %}
        {{name.upper().rstrip('S')}} {{name.lower()}}[{{name.upper()}}COUNT]; 
       {% endif %}
   } {{ name.upper() }};

{% endfor %}

typedef struct __attribute__ ((__packed__)){
{% for name,count,fmt in systems %}
    {{name.upper()}} {{name.lower()}};
{% endfor %}
} STATUSPKT;

extern STATUSPKT status;

#endif // End statusmsg guard
